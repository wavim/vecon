(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function tt(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function D(e,t=""){if(!Number.isSafeInteger(e)||e<0){const s=t&&`"${t}" `;throw new Error(`${s}expected integer >= 0, got ${e}`)}}function _(e,t,s=""){const r=tt(e),i=e?.length,n=t!==void 0;if(!r||n&&i!==t){const o=s&&`"${s}" `,f=n?` of length ${t}`:"",c=r?`length=${i}`:`type=${typeof e}`;throw new Error(o+"expected Uint8Array"+f+", got "+c)}return e}function C(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function q(e,t){_(e,void 0,"digestInto() output");const s=t.outputLen;if(e.length<s)throw new Error('"digestInto() output" expected to be of length >='+s)}function et(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function V(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function H(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function P(e,t){return e<<32-t|e>>>t}const z=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function J(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const nt=z?e=>e:e=>J(e);function st(e){for(let t=0;t<e.length;t++)e[t]=J(e[t]);return e}const I=z?e=>e:st;function it(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function rt(e,t={}){const s=(i,n)=>e(n).update(i).digest(),r=e(void 0);return s.outputLen=r.outputLen,s.blockLen=r.blockLen,s.create=i=>e(i),Object.assign(s,t),Object.freeze(s)}const ot=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),N=BigInt(2**32-1),F=BigInt(32);function X(e,t=!1){return t?{h:Number(e&N),l:Number(e>>F&N)}:{h:Number(e>>F&N)|0,l:Number(e&N)|0}}function E(e,t,s,r,i){return e=e+t+i|0,r=P(r^e,16),s=s+r|0,t=P(t^s,12),{a:e,b:t,c:s,d:r}}function L(e,t,s,r,i){return e=e+t+i|0,r=P(r^e,8),s=s+r|0,t=P(t^s,7),{a:e,b:t,c:s,d:r}}class ct{buffer;buffer32;finished=!1;destroyed=!1;length=0;pos=0;blockLen;outputLen;constructor(t,s){D(t),D(s),this.blockLen=t,this.outputLen=s,this.buffer=new Uint8Array(t),this.buffer32=V(this.buffer)}update(t){C(this),_(t);const{blockLen:s,buffer:r,buffer32:i}=this,n=t.length,o=t.byteOffset,f=t.buffer;for(let c=0;c<n;){this.pos===s&&(I(i),this.compress(i,0,!1),I(i),this.pos=0);const u=Math.min(s-this.pos,n-c),h=o+c;if(u===s&&!(h%4)&&c+u<n){const p=new Uint32Array(f,h,Math.floor((n-c)/4));I(p);for(let d=0;c+s<n;d+=i.length,c+=s)this.length+=s,this.compress(p,d,!1);I(p);continue}r.set(t.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(t){C(this),q(t,this);const{pos:s,buffer32:r}=this;this.finished=!0,H(this.buffer.subarray(s)),I(r),this.compress(r,0,!0),I(r);const i=V(t);this.get().forEach((n,o)=>i[o]=nt(n))}digest(){const{buffer:t,outputLen:s}=this;this.digestInto(t);const r=t.slice(0,s);return this.destroy(),r}_cloneInto(t){const{buffer:s,length:r,finished:i,destroyed:n,outputLen:o,pos:f}=this;return t||=new this.constructor({dkLen:o}),t.set(...this.get()),t.buffer.set(s),t.destroyed=n,t.finished=i,t.length=r,t.pos=f,t.outputLen=o,t}clone(){return this._cloneInto()}}function j(e,t,s,r,i,n,o,f,c,u,h,p,d,w,l,b,g,O,m,y){let a=0;for(let T=0;T<r;T++)({a:i,b:c,c:d,d:g}=E(i,c,d,g,s[t+e[a++]])),{a:i,b:c,c:d,d:g}=L(i,c,d,g,s[t+e[a++]]),{a:n,b:u,c:w,d:O}=E(n,u,w,O,s[t+e[a++]]),{a:n,b:u,c:w,d:O}=L(n,u,w,O,s[t+e[a++]]),{a:o,b:h,c:l,d:m}=E(o,h,l,m,s[t+e[a++]]),{a:o,b:h,c:l,d:m}=L(o,h,l,m,s[t+e[a++]]),{a:f,b:p,c:b,d:y}=E(f,p,b,y,s[t+e[a++]]),{a:f,b:p,c:b,d:y}=L(f,p,b,y,s[t+e[a++]]),{a:i,b:u,c:l,d:y}=E(i,u,l,y,s[t+e[a++]]),{a:i,b:u,c:l,d:y}=L(i,u,l,y,s[t+e[a++]]),{a:n,b:h,c:b,d:g}=E(n,h,b,g,s[t+e[a++]]),{a:n,b:h,c:b,d:g}=L(n,h,b,g,s[t+e[a++]]),{a:o,b:p,c:d,d:O}=E(o,p,d,O,s[t+e[a++]]),{a:o,b:p,c:d,d:O}=L(o,p,d,O,s[t+e[a++]]),{a:f,b:c,c:w,d:m}=E(f,c,w,m,s[t+e[a++]]),{a:f,b:c,c:w,d:m}=L(f,c,w,m,s[t+e[a++]]);return{v0:i,v1:n,v2:o,v3:f,v4:c,v5:u,v6:h,v7:p,v8:d,v9:w,v10:l,v11:b,v12:g,v13:O,v14:m,v15:y}}const k={CHUNK_START:1,CHUNK_END:2,PARENT:4,ROOT:8,KEYED_HASH:16,DERIVE_KEY_CONTEXT:32,DERIVE_KEY_MATERIAL:64},x=ot.slice(),Y=(()=>{const e=Array.from({length:16},(r,i)=>i),t=r=>[2,6,3,10,7,0,4,13,1,11,12,5,9,14,15,8].map(i=>r[i]),s=[];for(let r=0,i=e;r<7;r++,i=t(i))s.push(...i);return Uint8Array.from(s)})();class M extends ct{chunkPos=0;chunksDone=0;flags=0;IV;state;stack=[];posOut=0;bufferOut32=new Uint32Array(16);bufferOut;chunkOut=0;enableXOF=!0;constructor(t={},s=0){super(64,t.dkLen===void 0?32:t.dkLen);const{key:r,context:i}=t,n=i!==void 0;if(r!==void 0){if(n)throw new Error('Only "key" or "context" can be specified at same time');_(r,32,"key");const o=r.slice();this.IV=V(o),I(this.IV),this.flags=s|k.KEYED_HASH}else if(n){_(i,void 0,"context");const o=i,f=new M({dkLen:32},k.DERIVE_KEY_CONTEXT).update(o).digest();this.IV=V(f),I(this.IV),this.flags=s|k.DERIVE_KEY_MATERIAL}else this.IV=x.slice(),this.flags=s;this.state=this.IV.slice(),this.bufferOut=et(this.bufferOut32)}get(){return[]}set(){}b2Compress(t,s,r,i=0){const{state:n,pos:o}=this,{h:f,l:c}=X(BigInt(t),!0),{v0:u,v1:h,v2:p,v3:d,v4:w,v5:l,v6:b,v7:g,v8:O,v9:m,v10:y,v11:a,v12:T,v13:U,v14:$,v15:v}=j(Y,i,r,7,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],x[0],x[1],x[2],x[3],f,c,o,s);n[0]=u^O,n[1]=h^m,n[2]=p^y,n[3]=d^a,n[4]=w^T,n[5]=l^U,n[6]=b^$,n[7]=g^v}compress(t,s=0,r=!1){let i=this.flags;if(this.chunkPos||(i|=k.CHUNK_START),(this.chunkPos===15||r)&&(i|=k.CHUNK_END),r||(this.pos=this.blockLen),this.b2Compress(this.chunksDone,i,t,s),this.chunkPos+=1,this.chunkPos===16||r){let n=this.state;this.state=this.IV.slice();for(let o,f=this.chunksDone+1;(r||!(f&1))&&(o=this.stack.pop());f>>=1)this.buffer32.set(o,0),this.buffer32.set(n,8),this.pos=this.blockLen,this.b2Compress(0,this.flags|k.PARENT,this.buffer32,0),n=this.state,this.state=this.IV.slice();this.chunksDone++,this.chunkPos=0,this.stack.push(n)}this.pos=0}_cloneInto(t){t=super._cloneInto(t);const{IV:s,flags:r,state:i,chunkPos:n,posOut:o,chunkOut:f,stack:c,chunksDone:u}=this;return t.state.set(i.slice()),t.stack=c.map(h=>Uint32Array.from(h)),t.IV.set(s),t.flags=r,t.chunkPos=n,t.chunksDone=u,t.posOut=o,t.chunkOut=f,t.enableXOF=this.enableXOF,t.bufferOut32.set(this.bufferOut32),t}destroy(){this.destroyed=!0,H(this.state,this.buffer32,this.IV,this.bufferOut32),H(...this.stack)}b2CompressOut(){const{state:t,pos:s,flags:r,buffer32:i,bufferOut32:n}=this,{h:o,l:f}=X(BigInt(this.chunkOut++));I(i);const{v0:c,v1:u,v2:h,v3:p,v4:d,v5:w,v6:l,v7:b,v8:g,v9:O,v10:m,v11:y,v12:a,v13:T,v14:U,v15:$}=j(Y,0,i,7,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],x[0],x[1],x[2],x[3],f,o,s,r);n[0]=c^g,n[1]=u^O,n[2]=h^m,n[3]=p^y,n[4]=d^a,n[5]=w^T,n[6]=l^U,n[7]=b^$,n[8]=t[0]^g,n[9]=t[1]^O,n[10]=t[2]^m,n[11]=t[3]^y,n[12]=t[4]^a,n[13]=t[5]^T,n[14]=t[6]^U,n[15]=t[7]^$,I(i),I(n),this.posOut=0}finish(){if(this.finished)return;this.finished=!0,H(this.buffer.subarray(this.pos));let t=this.flags|k.ROOT;this.stack.length?(t|=k.PARENT,I(this.buffer32),this.compress(this.buffer32,0,!0),I(this.buffer32),this.chunksDone=0,this.pos=this.blockLen):t|=(this.chunkPos?0:k.CHUNK_START)|k.CHUNK_END,this.flags=t,this.b2CompressOut()}writeInto(t){C(this,!1),_(t),this.finish();const{blockLen:s,bufferOut:r}=this;for(let i=0,n=t.length;i<n;){this.posOut>=s&&this.b2CompressOut();const o=Math.min(s-this.posOut,n-i);t.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible after digest call");return this.writeInto(t)}xof(t){return D(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(q(t,this),this.finished)throw new Error("digest() was already called");return this.enableXOF=!1,this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}}const ft=rt((e={})=>new M(e));var ut=Object.defineProperty,B=(e,t)=>ut(e,"name",{value:t,configurable:!0});const ht=[{f:"T",p:"000,200 200,100 200,300"},{f:"T",p:"200,100 200,300 400,200"},{f:"T",p:"200,100 400,000 400,200"},{f:"T",p:"400,000 400,200 600,100"},{f:"T",p:"400,200 600,100 600,300"},{f:"T",p:"600,100 600,300 800,200"},{f:"R",p:"600,300 800,200 800,400"},{f:"R",p:"600,300 600,500 800,400"},{f:"R",p:"600,500 800,400 800,600"},{f:"R",p:"600,500 600,700 800,600"},{f:"R",p:"400,600 600,500 600,700"},{f:"R",p:"400,600 400,800 600,700"},{f:"L",p:"200,700 400,600 400,800"},{f:"L",p:"200,500 200,700 400,600"},{f:"L",p:"000,600 200,500 200,700"},{f:"L",p:"000,400 000,600 200,500"},{f:"L",p:"000,400 200,300 200,500"},{f:"L",p:"000,200 000,400 200,300"},{f:"T",p:"200,300 400,200 400,400"},{f:"T",p:"400,200 400,400 600,300"},{f:"R",p:"400,400 600,300 600,500"},{f:"R",p:"400,400 400,600 600,500"},{f:"L",p:"200,500 400,400 400,600"},{f:"L",p:"200,300 200,500 400,400"}];function A(e,t){return t.min+e%(t.max-t.min+1)}B(A,"fitRange");function K(e,t){return(1+e^2654435769*t)>>>0}B(K,"fibHash");function Q(e,t){const s=A(e[0],t.H),r=A(e[1],t.S),i=A(e[2],t.L),n=A(e[3],t.count),o=A(e[4],t.shift),f=A(e[5],t.alpha),c=e[6],u=e[7],h=Array(24).fill(!1).fill(!0,-n);for(let l=24-n;l<24;l++){const b=K(c,l)%(l+1);[h[l],h[b]]=[h[b],h[l]]}const p=ht.map(({f:l,p:b},g)=>{const O=K(u,g+1),m=A(O,t.variance),y=t.lighting[l];let a=`<polygon points="${b}" fill="hsl(${s+m} ${r} ${i+y})" />`;return h[g]&&(a+=`<polygon points="${b}" fill="hsl(${s+m+o} ${r} ${i+y} / ${f}%)" />`),a}),d=-t.margin,w=800+2*t.margin;return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="${d} ${d} ${w} ${w}" shape-rendering="crispEdges" style="${t.styles}">${p.join("")}</svg>`}B(Q,"draw");function W(e,t){const s=ft(it(e),{dkLen:16}),r=new Uint16Array(s.buffer);return Q(r,Object.assign({H:{min:0,max:360},S:{min:70,max:100},L:{min:40,max:60},count:{min:4,max:8},shift:{min:30,max:60},alpha:{min:50,max:100},variance:{min:5,max:20},lighting:{T:5,L:0,R:-5},margin:0,styles:""},t))}B(W,"vecon");const S=document.getElementById("frame"),G=document.getElementById("input"),R=150,Z=e=>{S.innerHTML=W(e?.length?e:"damn",{margin:R,styles:"width: 100%;"})};Z();G.oninput=()=>Z(G.value);S.onclick=async()=>{const e=new Image;e.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(S.innerHTML)}`,await new Promise((i,n)=>{e.onload=i,e.onerror=n});const t=document.createElement("canvas");[t.width,t.height]=[800+2*R,800+2*R],t.getContext("2d").drawImage(e,0,0,800+2*R,800+2*R);const r=document.createElement("a");r.download="vecon",r.href=t.toDataURL("image/png",1),r.click(),r.remove()};
